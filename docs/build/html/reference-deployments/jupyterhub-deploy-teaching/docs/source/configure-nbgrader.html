

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring nbgrader &mdash; JupyterHub 0.5.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="JupyterHub 0.5.0 documentation" href="../../../../index.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> JupyterHub
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting-started.html">Getting started with JupyterHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting-started.html#further-reading">Further reading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howitworks.html">How JupyterHub works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../websecurity.html">Web Security in JupyterHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../authenticators.html">Writing a custom Authenticator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../spawners.html">Writing a custom Spawner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/index.html">The JupyterHub API</a></li>
</ul>
<p class="caption"><span class="caption-text">Community documentation</span></p>
<ul class="simple">
</ul>
<p class="caption"><span class="caption-text">About JupyterHub</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Summary of changes in JupyterHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Questions? Suggestions?</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/forum/#!forum/jupyter">Jupyter mailing list</a></li>
<li class="toctree-l1"><a class="reference external" href="https://jupyter.org">Jupyter website</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stackoverflow.com/questions/tagged/jupyter">Stack Overflow - Jupyter</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stackoverflow.com/questions/tagged/jupyter-notebook">Stack Overflow - Jupyter-notebook</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">JupyterHub</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
    <li>Configuring nbgrader</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/reference-deployments/jupyterhub-deploy-teaching/docs/source/configure-nbgrader.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-nbgrader">
<h1>Configuring nbgrader<a class="headerlink" href="#configuring-nbgrader" title="Permalink to this headline">¶</a></h1>
<p>The nbgrader package will be installed with the reference deployment.</p>
<p>To run nbgrader&#8217;s formgrade application or use its notebook
extensions, additional steps are needed.</p>
<div class="section" id="configuring-the-extension">
<h2>Configuring the extension<a class="headerlink" href="#configuring-the-extension" title="Permalink to this headline">¶</a></h2>
<p>Each user who wants to use the notebook extension will need to run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ nbgrader extension activate
</pre></div>
</div>
</div>
<div class="section" id="deploy-formgrade">
<h2>Deploy formgrade<a class="headerlink" href="#deploy-formgrade" title="Permalink to this headline">¶</a></h2>
<p>Log into JupyterHub as the main instructor (<cite>nbgrader_owner</cite>).</p>
<p>Run the ansible-playbook to deploy formgrade:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ansible-playbook deploy_formgrade.yml
</pre></div>
</div>
<p>SSH into the server:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ssh {user}@{hostname}
</pre></div>
</div>
<p>Restart jupyterhub and nbgrader by doing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ supervisorctl reload
</pre></div>
</div>
</div>
<div class="section" id="configuration-notes">
<h2>Configuration notes<a class="headerlink" href="#configuration-notes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">To limit the deployment to certain hosts, add the <code class="docutils literal"><span class="pre">-l</span> <span class="pre">hostname</span></code> to the
commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ansible-playbook -l hostname deploy.yml
</pre></div>
</div>
</li>
<li><p class="first">The logs for <cite>jupyterhub</cite> are in <code class="file docutils literal"><span class="pre">/var/log/jupyterhub</span></code>.</p>
</li>
<li><p class="first">The logs for <cite>nbgrader</cite> are in <code class="file docutils literal"><span class="pre">/var/log/nbgrader</span></code>.</p>
</li>
<li><p class="first">If you are not using GitHub OAuth, you will need to manually create users using
<cite>adduser</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ adduser --gecos &quot;&quot; username
</pre></div>
</div>
</li>
<li><p class="first">Change the ansible configuration by editing <code class="file docutils literal"><span class="pre">./ansible_cfg</span></code>.</p>
</li>
<li><p class="first">To manage the jupyterhub and nbgrader services by SSH to the server and run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ supervisorctl jupyterhub { start, stop, restart }
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="troubleshooting-saving-and-restoring-users">
<h2>Troubleshooting: Saving and restoring users<a class="headerlink" href="#troubleshooting-saving-and-restoring-users" title="Permalink to this headline">¶</a></h2>
<p>In some situations, you may remount your user&#8217;s home directories into a new instance that
doesn&#8217;t have their user accounts, but has their home directories. When recreating the
same users it is important that they all have the same uids so the new users have
ownership of the home directories.</p>
<p><strong>This is only relevant when using GitHub OAuth for users and authentication.</strong></p>
<p>To save the list of usernames and uids in <cite>{{homedir}}/saved_users.txt</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ansible-playbook saveusers.yml
</pre></div>
</div>
<p>Then, when you run deploy.yml, it will look for this file and if it exists, will create
those users with those exact uids and home directories.</p>
<p>You can also manually create the users by running:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python3 create_users.py
</pre></div>
</div>
<p>in the home directory.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Project Jupyter team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'0.5.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>